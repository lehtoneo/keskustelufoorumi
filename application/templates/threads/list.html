{% extends "layout.html" %}

{% block content %}
  <div class="page header">
    <h1>All of the threads in the forum </h1>
    
    <br>

  </div>
  <form method="POST" action="{{ url_for('threads_with_category') }}">
  <div class="form-group">
    <label> Select category</label>
    {{ categoryform.categories(class="custom-select") }}
    
    <button type="submit" class="btn btn-primary mb-2">Show</button>
  </div>
  
    
  </form>
  <h5>Click title to open thread!</h5>
  <table class="table table-bordered table-dark">
    <tr>
      <th>Thread title</th>
      <th>Poster </th>
      <th>Categories</th>
      <th>Posted</th>
      {% if admin %}
      <th>Delete</th>
      {% endif %}
    </tr>
    {% for thread in threads %}
    <tr>
      <td><a href="{{ url_for('threads_open', thread_id=thread.id) }}">{{ thread.title }}</a></td>
      <td> 
        {{ thread.user.username }}
      </td>
    <td>
      {% for category in thread.categories %}
      {{ category.category.name }}
      {% endfor %}
    </td>

    <td> 
      {{ thread.posted }}
    </td>

    {% if admin %}
    <td>
      <form method="POST" action="{{ url_for('admin_thread_delete', thread_id=thread.id) }}">
        <button type="submit">DELETE</button>
      </form>
    </td>
    {% endif %}
    </tr>
    {% endfor %}
  </table>
{% endblock %}